{% extends 'indexAdmin.html.twig' %}



{% block title %}List évènement Admin {% endblock %}


{%  block body %}


 {% block header %}
   <header id="header" class="header fixed-top d-flex align-items-center">

  <div class="d-flex align-items-center justify-content-between">
    <a href="index.html" class="logo d-flex align-items-center">
      <img src="assets/img/logo.png" alt="">
      <span class="d-none d-lg-block">EcoPartage</span>
    </a>
    <i class="bi bi-list toggle-sidebar-btn"></i>
  </div><!-- End Logo -->

  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">
      <li class="nav-item dropdown pe-3">
        <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
          {% if user.image is defined and user.image is not empty %}
            <img src="{{ asset('uploads/images/' ~ user.image) }}" class="rounded-circle" width="50" height="50">
          {% endif %}
          <span class="d-none d-md-block dropdown-toggle ps-2">{{ user.prenom }} {{ user.nom }}</span>
        </a><!-- End Profile Iamge Icon -->

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
          <li class="dropdown-header">
            <h6>{{ user.prenom }} {{ user.nom }}</h6>
          </li>
          <li><hr class="dropdown-divider"></li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
              <i class="bi bi-person"></i>
              <span>My Profile</span>
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
              <i class="bi bi-gear"></i>
              <span>Account Settings</span>
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{{ path('handle_password_reset') }}">
              <i class="bi bi-box-arrow-right"></i>
              <span>Reset Password</span>
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{{ path('app_logout') }}">
              <i class="bi bi-box-arrow-right"></i>
              <span>Sign Out</span>
            </a>
          </li>
        </ul><!-- End Profile Dropdown Items -->
      </li><!-- End Profile Nav -->
    </ul>
  </nav><!-- End Icons Navigation -->
</header>
<!-- End Header -->
{% endblock %}

{% block sidebar %}
<aside id="sidebar" class="sidebar">

  <ul class="sidebar-nav" id="sidebar-nav">

    <li class="nav-item">
      <a class="nav-link collapsed " href="/admin/dashboard">
        <i class="bi bi-grid"></i>
        <span>Dashboard</span>
      </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#components-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-menu-button-wide"></i><span>Dépôts</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="components-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="components-alerts.html">
            <i class="bi bi-circle"></i><span>Alerts</span>
          </a>
        </li>
        <li>
          <a href="components-accordion.html">
            <i class="bi bi-circle"></i><span>Accordion</span>
          </a>
        </li>
        <li>
          <a href="components-badges.html">
            <i class="bi bi-circle"></i><span>Badges</span>
          </a>
        </li>
        <li>
          <a href="components-breadcrumbs.html">
            <i class="bi bi-circle"></i><span>Breadcrumbs</span>
          </a>
        </li>
        <li>
          <a href="components-buttons.html">
            <i class="bi bi-circle"></i><span>Buttons</span>
          </a>
        </li>
        <li>
          <a href="components-cards.html">
            <i class="bi bi-circle"></i><span>Cards</span>
          </a>
        </li>
        <li>
          <a href="components-carousel.html">
            <i class="bi bi-circle"></i><span>Carousel</span>
          </a>
        </li>
        <li>
          <a href="components-list-group.html">
            <i class="bi bi-circle"></i><span>List group</span>
          </a>
        </li>
        <li>
          <a href="components-modal.html">
            <i class="bi bi-circle"></i><span>Modal</span>
          </a>
        </li>
        <li>
          <a href="components-tabs.html">
            <i class="bi bi-circle"></i><span>Tabs</span>
          </a>
        </li>
        <li>
          <a href="components-pagination.html">
            <i class="bi bi-circle"></i><span>Pagination</span>
          </a>
        </li>
        <li>
          <a href="components-progress.html">
            <i class="bi bi-circle"></i><span>Progress</span>
          </a>
        </li>
        <li>
          <a href="components-spinners.html">
            <i class="bi bi-circle"></i><span>Spinners</span>
          </a>
        </li>
        <li>
          <a href="components-tooltips.html">
            <i class="bi bi-circle"></i><span>Tooltips</span>
          </a>
        </li>
      </ul>
    </li><!-- End Components Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-journal-text"></i><span>Produits</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="forms-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="forms-elements.html">
            <i class="bi bi-circle"></i><span>Form Elements</span>
          </a>
        </li>
        <li>
          <a href="forms-layouts.html">
            <i class="bi bi-circle"></i><span>Form Layouts</span>
          </a>
        </li>
        <li>
          <a href="forms-editors.html">
            <i class="bi bi-circle"></i><span>Form Editors</span>
          </a>
        </li>
        <li>
          <a href="forms-validation.html">
            <i class="bi bi-circle"></i><span>Form Validation</span>
          </a>
        </li>
      </ul>
    </li><!-- End Forms Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-layout-text-window-reverse"></i><span>Publications</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
            <a href="/AfficheListeAdminPub">
              <i class="bi bi-circle"></i><span>Actualités</span>
            </a>
          </li>
          <li>
            <a href="/AfficheListeAdminDem">
              <i class="bi bi-circle"></i><span>Demandes</span>
          </a>
        </li>
      </ul>
    </li><!-- End Tables Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#charts-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-bar-chart"></i><span>Formations</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="charts-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="charts-chartjs.html">
            <i class="bi bi-circle"></i><span>Chart.js</span>
          </a>
        </li>
        <li>
          <a href="charts-apexcharts.html">
            <i class="bi bi-circle"></i><span>ApexCharts</span>
          </a>
        </li>
        <li>
          <a href="charts-echarts.html">
            <i class="bi bi-circle"></i><span>ECharts</span>
          </a>
        </li>
      </ul>
    </li><!-- End Charts Nav -->

  <li class="nav-item">
      <a class="nav-link"  href="{{ path('app_list_evenements') }}">
<i class="bi bi-people"></i> Évènements
      </a>
  </li>
  
  <!-- End Icons Nav -->

    <li class="nav-heading">Pages</li>

    <li class="nav-item">
      <a class="nav-link collapsed" href="users-profile.html">
        <i class="bi bi-person"></i>
        <span>Profile</span>
      </a>
    </li><!-- End Profile Page Nav -->


    <li class="nav-item">
      <a class="nav-link collapsed" href="pages-contact.html">
        <i class="bi bi-envelope"></i>
        <span>Contact</span>
      </a>
    </li><!-- End Contact Page Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href="pages-register.html">
        <i class="bi bi-card-list"></i>
        <span>Register</span>
      </a>
    </li><!-- End Register Page Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href={{ path('app_logout') }}>
        <i class="bi bi-box-arrow-in-right"></i>
        <span>Se déconnecter</span>
      </a>
    </li><!-- End Login Page Nav -->


  </ul>

</aside>
{% endblock  %}

{% block conten  %}
<main id="main" class="main">
    
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Évènement</h5>

            <nav >
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/AfficheAdmin">Acceuil</a></li>
                    <li class="breadcrumb-item active"><a href="/listevenements">Évènement</a></li>
                </ol>
            </nav>
        </div>
    </div>

<style>
.btn-primarytri:hover {
    background-color: #007bff;
}

.btn-primarytri {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    margin-left: calc(100% +200px);
    bottom: 900px;
}

/* Style for the dropdown menu */
.dropdown-menu {
    background-color: #fff; /* Background color of the dropdown menu */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Box shadow for the dropdown menu */
    border: none; /* Remove border from the dropdown menu */
}

/* Style for dropdown items */
.dropdown-item {
    color: #000; /* Text color of dropdown items */
    padding: 8px 16px; /* Padding for dropdown items */
    transition: background-color 0.3s; /* Transition effect for background color */
}

/* Hover and focus styles for dropdown items */
.dropdown-item:hover,
.dropdown-item:focus {
    background-color: #f8f9fa; /* Background color on hover/focus */
    color: #000; /* Text color on hover/focus */
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js" integrity="sha512-A+grZjrvSxGHCXZP/UGpFweCw5iRejrNcN3ELexwMm6Arl3OpEsAd3uD81+oD1r8D19GrYdqWWGLtM4iVtjeyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<h1></h1>


<div>
    <a href="{{ path('app_ajouter_evenement') }}" class="btn btn-success mb-2 "><i class="bi bi-plus-circle"></i> Ajouter évènement</a>

    </div>
<div class="dropdown">
  <button class="btn btn-primarytri dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Trier Par
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
   <a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'id', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">ID</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'nom', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nom</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'date_debut', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Date de début</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'period', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Période</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'Nbrparticipants', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nombre de participants</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'NumberOfComment', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nombre de commentaires</a>
<a class="dropdown-item" href="{{ path('app_list_evenements', {'sort_by': 'etat', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">État</a>

  </div>

</div>

<div class="card">
    <div class="card-body">
<table class="table table-hover">
        <thead>
            <tr>
            <th scope="col"></th>
                <th scope="col">Image</th>
                <th scope="col">Id</th>
                <th scope="col">Nom</th>
                <th scope="col">Description</th>
                <th scope="col">Date_debut</th>
                <th scope="col">Date_fin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th scope="col">Periode évènement</th>
                <th scope="col">Objectif</th>
                <th scope="col">Formation</th>
                <th scope="col">Nbrparticipants</th>
                <th scope="col">Commentaires</th>
                <th scope="col">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th scope="col">actions</th>
            </tr>
        </thead>
        <tbody>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

        {% for evenement in listevenements %}
               
        {% if evenement.etat != 'supprimé' %}
        {{evenement.updateEtat()}}
        {% endif %}
            <tr>
             <th scope="row"></th>
<td>
    <img src="{{ asset('uploads/' ~ evenement.image) }}" class="img-fluid" style="max-width: 100px; max-height: 100px;">
</td>
                <td>{{ evenement.id }}</td>
                <td>{{ evenement.nom }}</td>
                <td>{{ evenement.description }}</td>
                <td>{{ evenement.dateDebut ? evenement.dateDebut|date('Y-m-d H:i') : '' }}</td>
                <td>{{ evenement.dateFin ? evenement.dateFin|date('Y-m-d H:i') : '' }}</td>
                <td>{{ evenement.calculatePeriod() }}</td>
                <td>{{ evenement.objectif }}</td>
                <td>{{ evenement.formation ? 'Oui' : 'Non' }}</td>

                 <td>{{ evenement.participationevenement|length }}</td>
                 <td>{{ evenement.getNumberOfComments() }}</td>
                                  <td>{% if evenement.etat == 'finis' %}
    <i class="fas fa-check-circle" style="color: green;"></i> Finis
{% elseif evenement.etat == 'en cours' %}
    <i class="fas fa-spinner fa-spin" style="color: orange;"></i> En cours
{% elseif evenement.etat == 'à venir' %}
    <i class="far fa-calendar-alt" style="color: blue;"></i> À venir
{% elseif evenement.etat == 'supprimé' %}
    <i class="fas fa-trash-alt" style="color: red;"></i> Supprimé
{% endif %}
</td>

                <td>
                    <a href="{{ path('app_afficher_evenement', {'id': evenement.id}) }}">afficher</a>
                    {% if evenement.etat != 'finis' %}
                    <a href="{{ path('app_modifier_evenement', {'id': evenement.id}) }}">modifier</a>
                    {% endif %}
<a href="{{ path('app_supprimer_evenement', {'id': evenement.id}) }}" onclick="return confirm('Voulez-vous vraiment supprimer l\'évènement {{ evenement.nom }} ? (si son état est supprimé , l\evenement sera supprimé de la database)')"> SUPPRIMER </a>
                    {% if evenement.etat == 'supprimé' %}
                    <a href="{{ path('app_recuperer_evenement', {'id': evenement.id}) }}" onclick="return confirm('Voulez-vous vraiment récupèrer l\'évènement {{ evenement.nom }} ?')"> Récupérer</a>
                    {% endif %}
                </td>
            </tr>
            </tbody>
        {% else %}

                <p>il n'ya pas d'évènement </p>

        {% endfor %}
        </table>
        </div>
</div>



</main>


{% endblock %}




{% endblock %}