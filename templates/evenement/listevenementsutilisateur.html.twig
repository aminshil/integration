{% extends 'utilisateur/index.html.twig' %}
{% block title %}List évènement{% endblock %}
{%  block body %}
{% block header %}
 <!-- ======= Header ======= -->
    <header id="header" class="fixed-top">
        <div class="container d-flex align-items-center">
            <a href="index.html" class="logo me-auto me-lg-0"><img src="{{asset('assets/img/logo1.png')}}" alt="" class="img-fluid"></a>


            <h1 class="logo me-auto"><a href="index.html"><span>ECO</span>PARTAGE</a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="index.html" class="logo me-auto me-lg-0"><img src="{{asset('assets/img/logo.png')}}" alt="" class="img-fluid"></a>-->

            <nav id="navbar" class="navbar order-last order-lg-0">
                <ul>
                    <li><a href="index.html" >acceuil</a></li>

                    <li class="dropdown"><a href="#"><span>Publication</span> <i class="bi bi-chevron-down"></i></a>
                        <ul>
                            <li><a href="about.html">Demande</a></li>
                            <li><a href="team.html">Actualités</a></li>
                        </ul>
                    </li>
                    <li><a href="services.html">dépôts</a></li>
                    <li><a href="portfolio.html">Produits</a></li>
                    <li><a href="pricing.html">Formations</a></li>
                    <li><a href="{{ path('app_list_evenements_utilisateur') }}" class="active" >Évènements</a></li>
                     <li class="nav-item dropdown pe-3">
  
  
        <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
    {% if user.image is defined and user.image is not empty %}
        <img src="{{ asset('uploads/images/' ~ user.image) }}" class="rounded-circle" width="30" height="30">
    {% endif %}


          <span class="d-none d-md-block dropdown-toggle ps-2">{{ user.prenom }} {{ user.nom }}</span>
        </a><!-- End Profile Iamge Icon -->
</a>
        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
          <li class="dropdown-header">
            <h6>{{ user.prenom }} {{ user.nom }}</h6>
           
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
              <i class="bi bi-person"></i>
              <span>My Profile</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
              <i class="bi bi-gear"></i>
              <span>Account Settings</span>
            </a>
          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            {% if not user.isVerified %}
    <a class="dropdown-item d-flex align-items-center"  
    href="{{ path('handle_password_reset') }}">
        <i class="bi bi-box-arrow-right"></i>
        <span>Reset Password</span>
    </a>
{% endif %}

          </li>
          <li>
            <hr class="dropdown-divider">
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" href="{{ path('app_logout') }}">
    <i class="bi bi-box-arrow-right"></i>
    <span>Sign Out</span>
</a>
          </li>

 

                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->


        </div>
    </header><!-- End Header -->
    {% endblock %}


  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
        
          <h2>Évènements</h2>
          <ol>
            <li><a href="index.html">Home</a></li>

          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->
<style>
.btn-primaryyy {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    margin-left: calc(100% - 400px);
    position: fixed;
    bottom: 700px;
}



.btn-primaryyy:hover {
    background-color: #007bff;
}

.btn-primarytri:hover {
    background-color: #007bff;
}

.btn-primarytri {
    background-color: #007bff;
    border-color: #007bff;
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    margin-left: calc(100% - 400px);
    position: fixed;
    bottom: 650px;
}

/* Style for the dropdown menu */
.dropdown-menu {
    background-color: #fff; /* Background color of the dropdown menu */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Box shadow for the dropdown menu */
    border: none; /* Remove border from the dropdown menu */
}

/* Style for dropdown items */
.dropdown-item {
    color: #000; /* Text color of dropdown items */
    padding: 8px 16px; /* Padding for dropdown items */
    transition: background-color 0.3s; /* Transition effect for background color */
}

/* Hover and focus styles for dropdown items */
.dropdown-item:hover,
.dropdown-item:focus {
    background-color: #f8f9fa; /* Background color on hover/focus */
    color: #000; /* Text color on hover/focus */
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js" integrity="sha512-A+grZjrvSxGHCXZP/UGpFweCw5iRejrNcN3ELexwMm6Arl3OpEsAd3uD81+oD1r8D19GrYdqWWGLtM4iVtjeyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<div class="event-list">
    <a href="{{ path('app_list_evenements_finis_utilisateur') }}" class="btn btn-primaryyy">Les évènements finis</a></div>

<div class="dropdown">
  <button class="btn btn-primarytri dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Trier Par
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'nom', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nom</a>
<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'date_debut', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Date de début</a>
<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'period', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Période</a>
{#<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'Nbrparticipants', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nombre de participants</a>#}
<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'NumberOfComment', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">Nombre de commentaires</a>
<a class="dropdown-item" href="{{ path('app_list_evenements_utilisateur', {'sort_by': 'etat', 'sort_order': sort_order == 'asc' ? 'desc' : 'asc'}) }}">État</a>
  </div>
</div>

    <!-- ======= Blog Section ======= -->
    <section id="blog" class="blog">
      <div class="container" data-aos="fade-up">

        <div class="row">

          <div class="col-lg-8 entries">
              <style>
        .entries .entry img {
            width: 100%;
            height: auto; /* Maintain aspect ratio */
        }
    </style>
{% for evenement in listevenements %}
{{evenement.updateEtat()}}
 {% if evenement.etat == 'en cours' or evenement.etat == 'à venir' %}
            <article class="entry">

              <div class="entry-img">
                <img src={{asset('uploads/' ~ evenement.image)}} class="img-fluid">
              </div>

              <h2 class="entry-title">
                <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}">{{ evenement.nom }}</a>
              </h2>
<div class="entry-meta">
                <ul>
{% if evenement.etat == 'en cours' %}
    <i class="fas fa-spinner fa-spin" style="color: orange;"></i> En cours
{% elseif evenement.etat == 'à venir' %}
    <i class="far fa-calendar-alt" style="color: blue;"></i> À venir
{% endif %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

                </ul>
              </div>

              <div class="entry-meta">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-single.html">{{ evenement.getUserEvenement().nom }} {{ evenement.getUserEvenement().prenom }}</a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}"><time datetime=evenement.dateDebut>{{ evenement.dateDebut ? evenement.dateDebut|date('Y-m-d H:i') : '' }}</time></a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}"><time datetime=evenement.dateFin>{{ evenement.dateFin ? evenement.dateFin|date('Y-m-d H:i') : '' }}</time></a></li>
                   <li> Période : {{ evenement.calculatePeriod() }} </li>
                  <li class="d-flex align-items-center"><i class="bi bi-chat-dots"></i> <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}">{{ evenement.getNumberOfComments() }}</a></li>
                <li> <i class="bi bi-people"></i> {{ evenement.participationevenement|length }}</li>
                </ul>
              </div>

              <div class="entry-content">
              <h6>
                                <p>
                                Adresse : 
                  {{ evenement.locationtext }}
                </p>
                </h6>
                <p>
                  {{ evenement.description }}
                </p>
                <div class="read-more">
                  <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}">Afficher plus</a>
                                                <p></p>     
{% if evenement.participationevenement.contains(user) %}
    <form action="{{ path('evenement_unparticipate', {'id': evenement.id}) }}" method="post">
        <button type="submit" class="btn btn-danger">Annuler Participation</button>
    </form>
{% else %}
    <form action="{{ path('evenement_participate', {'id': evenement.id}) }}" method="post">
        <button type="submit" class="btn btn-success">Participer</button>
    </form>
{% endif %}
                                                                            <p></p>     

                                              <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}">Ajouter un commentaire</a>
                   </div>
                                   

              </div>

            </article><!-- End blog entry -->
{% endif %}
{% else %}
                    <tr>
                <h1>il n'ya pas d'évènement </h1>  
            </tr>
<div style="height: 45vh;"></div>
        {% endfor %}






        </main>
        {#}

            <div class="blog-pagination">
              <ul class="justify-content-center">
                <li><a href="#">1</a></li>
                <li class="active"><a href="#">2</a></li>
                <li><a href="#">3</a></li>
              </ul>
            </div>

          </div>
#}

{% block footer %}
    <footer id="footer">

        <div class="footer-top  ">
            <div class="container ">
                <div class="footer-contact text-center  ">

                 <a href="index.html" class="logo"><img src="{{asset('assets/img/logo1.png')}}"  alt="texte alternatif" width=5% height=5% class="img-fluid"></a>
                    <h3>ECOPARTAGE</h3>

                </div>
                <div class="row">

                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">acceuil</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Edit profile</a></li>
                        </ul>

                    </div>
                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">dépôts</a></li>
                        </ul>

                    </div>
                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Produits</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Formations</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6 footer-links">

                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">événements</a></li>
                        </ul>
                    </div>



                    <div class="text-center footer-newsletter">

                        <div class="social-links text-center text-md-right pt-3 pt-md-0">
                            <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                            <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                            <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                            <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                            <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
                        </div>
                    </div>


                </div>
            </div>
        </div>


    </footer>
{% endblock %}

<style>
.footer { 
    position: fixed;
    bottom: 0;
    margin-top: auto;
    width: 100%;
}
</style>

          {% endblock %}

       