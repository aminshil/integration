{% extends 'evenement/listevenementsutilisateur.html.twig' %}
{% block title %}{{ evenement.nom }}{% endblock %}


{%  block body %}

{% block header %}
{{ parent() }}
{% endblock %}





<main id="main">

    <!-- ======= Breadcrumbs ======= -->


    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Évènement</h2>
          <ol>
            <li><a href="listevenementsutilisateur">List des évènements</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li>{{ evenement.nom }}</li>
          </ol>  
        </div>

      </div>
    </section><!-- End Breadcrumbs -->
  

    <!-- ======= Blog Single Section ======= -->
    <section id="blog" class="blog">
      <div class="container" data-aos="fade-up">

        <div class="row">

          <div class="col-lg-8 entries">

            <article class="entry entry-single">

              <div class="entry-img">
                <img src={{asset('uploads/' ~ evenement.image)}} class="img-fluid">
              </div>

              <h2 class="entry-title">
                <a href="blog-single.html">{{ evenement.nom }}</a>
              </h2>

                   <div class="read-more">
{% if evenement.participationevenement.contains(user) %}
    <form action="{{ path('evenement_unparticipate', {'id': evenement.id}) }}" method="post">
        <button type="submit" class="btn btn-danger">Annuler Participation</button>
    </form>
{% else %}
    <form action="{{ path('evenement_participate', {'id': evenement.id}) }}" method="post">
        <button type="submit" class="btn btn-success">Participer</button>
    </form>
{% endif %}
                                            <p>
                
                </p>
                    </div>

              <div class="entry-meta">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-single.html">Createur</a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-single.html"><time datetime=evenement.dateDebut>{{ evenement.dateDebut ? evenement.dateDebut|date('Y-m-d H:i') : '' }}</time></a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-single.html"><time datetime=evenement.dateFin>{{ evenement.dateFin ? evenement.dateFin|date('Y-m-d H:i') : '' }}</time></a></li>
                  <li> Période : {{ evenement.calculatePeriod() }} </li>
                  <li class="d-flex align-items-center"><i class="bi bi-chat-dots"></i> <a href="{{ path('app_afficher_evenement_utilisateur', {'id': evenement.id}) }}">{{ evenement.getNumberOfComments() }}</a></li>

                </ul>
              </div>

              <div class="entry-content">
                <p>
                  {{ evenement.description }}
                </p>
                        {#
                <blockquote>
                  <p>
                    Et vero doloremque tempore voluptatem ratione vel aut. Deleniti sunt animi aut. Aut eos aliquam doloribus minus autem quos.
                  </p>
                </blockquote>

                <p>
                  Sed quo laboriosam qui architecto. Occaecati repellendus omnis dicta inventore tempore provident voluptas mollitia aliquid. Id repellendus quia. Asperiores nihil magni dicta est suscipit perspiciatis. Voluptate ex rerum assumenda dolores nihil quaerat.
                  Dolor porro tempora et quibusdam voluptas. Beatae aut at ad qui tempore corrupti velit quisquam rerum. Omnis dolorum exercitationem harum qui qui blanditiis neque.
                  Iusto autem itaque. Repudiandae hic quae aspernatur ea neque qui. Architecto voluptatem magni. Vel magnam quod et tempora deleniti error rerum nihil tempora.
                </p>
                          #}
                <h3>Objectif</h3>
                <p>
                  {{ evenement.objectif }}
                </p>
                <h3>Formation</h3>
                 <p>
{{ evenement.formation ? 'Oui' : 'Non' }}
</p>
                <h3>La localisation de l'évènement:</h3>
                <p>
      <div id="map" style="width: 100%; height: 400px;"></div>
                </p>
               {# <h3>Ut repellat blanditiis est dolore sunt dolorum quae.</h3>
                <p>
                  Rerum ea est assumenda pariatur quasi et quam. Facilis nam porro amet nostrum. In assumenda quia quae a id praesentium. Quos deleniti libero sed occaecati aut porro autem. Consectetur sed excepturi sint non placeat quia repellat incidunt labore. Autem facilis hic dolorum dolores vel.
                  Consectetur quasi id et optio praesentium aut asperiores eaque aut. Explicabo omnis quibusdam esse. Ex libero illum iusto totam et ut aut blanditiis. Veritatis numquam ut illum ut a quam vitae.
                </p>
                <p>
                  Alias quia non aliquid. Eos et ea velit. Voluptatem maxime enim omnis ipsa voluptas incidunt. Nulla sit eaque mollitia nisi asperiores est veniam.
                </p>
#}
              </div>
                              <h4>Modifier votre commentaire!</h4>
                <p></p>
                  <div class="row">
                    <div class="col-md-6 form-group">
                        
                   <div> {{form_start(formmodifiercommentaire,{'attr':{'novalidate':'novalidate'}})}}</div> 
                    <div> {{ form_label(formmodifiercommentaire.contenu) }}</div> 
                     <div> {{ form_widget(formmodifiercommentaire.contenu) }}</div> 
                     <div> {{ form_errors(formmodifiercommentaire.contenu) }}</div>
                    <div> {{form_end(formmodifiercommentaire)}}</div> 
        </div>

      </div>
        </div>

      </div>

    </section><!-- End Blog Single Section -->

  </main><!-- End #main -->


{% block footer %}
{{ parent() }}
{% endblock %}


<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<!-- Map script -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // Initialize the map with the event's coordinates
    var eventLocation = [{{ evenement.latitude }}, {{ evenement.longitude }}];
    var map = L.map('map').setView(eventLocation, 15); // Adjust zoom level as needed

    // Add the base map layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(map);

    // Add marker for the event location
    L.marker(eventLocation).addTo(map)
        .bindPopup('{{ evenement.nom }}'); // Optional popup for the marker
</script>
{% endblock %}


