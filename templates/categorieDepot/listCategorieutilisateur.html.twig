{% extends 'base.html.twig' %}
{% block body %}
<!-- ======= Header ======= -->
<header id="header" class="fixed-top">
<div class="container d-flex align-items-center">
<a href="index.html" class="logo me-auto me-lg-0"><img src="{{asset('assets/img/logo1.png')}}" alt="" class="img-fluid"></a>

<h1 class="logo me-auto"><a href="/Affiche"><span>ECO</span>PARTAGE</a></h1>
<!-- Uncomment below if you prefer to use an image logo -->
<!-- <a href="index.html" class="logo me-auto me-lg-0"><img src="{{asset('assets/img/logo.png')}}" alt="" class="img-fluid"></a>-->

<nav id="navbar" class="navbar order-last order-lg-0">
<ul>
       
 <li class="dropdown"><a href="#"><span>Publication</span> <i class="bi bi-chevron-down"></i></a>
<ul>
<li><a href="about.html">Demande</a></li>
<li><a href="team.html">Actualités</a></li>
</ul>
</li>
<li class="dropdown"><a href="#"><span>Dépots</span> <i class="bi bi-chevron-down"></i></a>
<ul>
<li><a href="/ajouterDepots">Je Donne</a></li>
<li><a href="/RecupereDepotsutilisateur">Je Récupére</a></li>
<li><a href="/listDepotsutilisateur">Voir Dépots</a></li>
<li><a href="/listCategorieutilisateur">Voir Categorie</a></li>
</ul>
<li><a href="portfolio.html">Produits</a></li>
<li><a href="pricing.html">Formations</a></li>
<li><a href="blog.html">événements</a></li>
<li><a href=login.html.twig">s'authentifier</a>
</li>

</ul>
<i class="bi bi-list mobile-nav-toggle"></i>
</nav><!-- .navbar -->
<div class="header-social-links d-flex">
<a href="#" class="twitter"><i class="bu bi-twitter"></i></a>
<a href="#" class="facebook"><i class="bu bi-facebook"></i></a>
<a href="#" class="instagram"><i class="bu bi-instagram"></i></a>
<a href="#" class="linkedin"><i class="bu bi-linkedin"></i></a>
</div>

</div>
</header><!-- End Header -->
   <br></br>
   
{% block content %}
    <main id="main">

        <!-- ======= Breadcrumbs ======= -->
      <section id="breadcrumbs" class="breadcrumbs">
    <div class="container">
        <div class="d-flex justify-content-center align-items-center">
            <h2 class="text-center font-weight-bold" style="font-size: 36px; color: #333;">Notre Catégorie</h2>
        </div>
    </div>
</section><!-- End Breadcrumbs -->

        <!-- ======= Blog Section ======= -->
        <section id="blog" class="blog">
            <div class="container" data-aos="fade-up">
                <div class="row">
                     {% for categorie in listCategorie %}
                         <div class="col-lg-6 entries">
                         <article class="entry">
                          <h2 class="entry-title">
                          <a href="#" class="categorie-link" data-categorie-id="{{ categorie.id }}">{{ categorie.Nom }}</a>
                          </h2>
                          <div class="entry-content">
                             <p>{{ categorie.Description }}</p>
                          <div class="read-more">
                              <a href="#" class="depots-link" data-categorie-id="{{ categorie.id }}">Leurs Depots</a>
                        </div>
                    </div>
                </article>
            </div>
        {% else %}
            <div class="col-lg-12 entries">
                <p>Aucune catégorie disponible</p>
            </div>
        {% endfor %}
            </div>
 <div id="depots-container"></div>

    <script>
        // Add your JavaScript code here to handle the AJAX requests and display depots
        document.addEventListener("DOMContentLoaded", function () {
            var depotsContainer = document.getElementById("depots-container");

            var depotsLinkElements = document.querySelectorAll(".depots-link");
            depotsLinkElements.forEach(function (link) {
                link.addEventListener("click", function (event) {
                    event.preventDefault();
                    var categoryId = this.getAttribute("data-categorie-id");
                    fetchDepots(categoryId);
                });
            });

            function fetchDepots(categoryId) {
                // Make an AJAX request to your Symfony controller endpoint
                fetch(`/getDepotsByCategory/${categoryId}`)
                    .then(response => response.json())
                    .then(depots => {
                        // Render depots in the depotsContainer (you need to implement this)
                        renderDepots(depots);
                    })
                    .catch(error => console.error('Error fetching depots:', error));
            }

            function renderDepots(depots) {
                // Add your code to render depots in the depotsContainer
                // For example, you can create HTML elements and append them to depotsContainer
                // Update this part based on how you want to display depots
                depotsContainer.innerHTML = '';
                depots.forEach(function (depot) {
                    var depotElement = document.createElement("div");
                    depotElement.textContent = depot.Nom; // Adjust this based on your depot structure
                    depotsContainer.appendChild(depotElement);
                });
            }
        });
    </script>
 </div>
        </section><!-- End Blog Section -->

    </main>
{% endblock %}


<br></br>
<br></br>
    <!-- ======= Footer ======= -->
    <footer id="footer">

        <div class="footer-top  ">
            <div class="container ">
   <div class="footer-contact text-center  ">

    <a href="index.html" class="logo"><img src="{{asset('assets/img/logo1.png')}}"  alt="texte alternatif" width=5% height=5% class="img-fluid"></a>
       <h3>ECOPARTAGE</h3>

   </div>
   <div class="row">

       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">acceuil</a></li>
    </ul>
       </div>

       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">Publication</a></li>
    </ul>
       </div>
       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">dépôts</a></li>
    </ul>
       </div>
       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">Produits</a></li>
    </ul>
       </div>
       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">Formations</a></li>
    </ul>
       </div>
       <div class="col-lg-2 col-md-6 footer-links">

    <ul>
        <li><i class="bx bx-chevron-right"></i> <a href="#">événements</a></li>
    </ul>
       </div>


       <div class="text-center footer-newsletter">

    <div class="social-links text-center text-md-right pt-3 pt-md-0">
        <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
        <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
        <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
    </div>
       </div>


   </div>
            </div>
        </div>


    </footer><!-- End Footer -->
{% endblock %}